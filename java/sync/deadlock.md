## 什么是死锁

当两个以上的运算单元，双方都在等待对方停止运行，以获取系统资源，但是没有一方提前退出时，就称为死锁。
在多任务操作系统中，操作系统为了协调不同进程，能否获取系统资源时，为了让系统运作，必须要解决这个问题。

1. 发生在并发中
2. 当两个线程持有对方所需要的资源又不主动释放，导致所有人都没有办法继续前进，这就是死锁

## 死锁的影响

死锁在不同系统中的影响是不同的，取决于系统对于死锁的处理能力

## 死锁的预防

如果系统中只有一个进程，当然不会产生死锁。如果每个进程仅需要一种系统资源，也不会产生死锁。
死锁的四个条件：

- 禁止抢占：no preemption
- 持有和等待: hold and wait
- 互斥:mutual exclustion
- 循环等待:circular waiting
预防死锁就是至少破坏四个条件其中一项。

解决方案：

- 尽量一个线程只获取一个锁
- 一个线程只占用一个资源
- 尝试使用定时锁，至少能保证锁最终被释放
- 定期检查死锁，发现死锁后，必须采取措施消除死锁。
