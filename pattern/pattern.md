[è®¾è®¡æ¨¡å¼ç™¾ç§‘](http://www.baike.com/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F)

è®¾è®¡æ¨¡å¼å…­å¤§åŸåˆ™ï¼š
1. å¼€é—­åŸåˆ™(Open Close Principle)ï¼šå¯¹æ‰©å±•å¼€æ”¾å¯¹ä¿®æ”¹å…³é—­
2. é‡Œæ°ä»£æ¢åŸåˆ™ï¼ˆLiskov Subsititution Principleï¼‰ï¼šçˆ¶ç±»å‡ºç°çš„åœ°æ–¹ï¼Œå­ç±»ä¹Ÿå¯å‡ºç°
3. ä¾èµ–å€’è½¬åŸåˆ™ï¼ˆDependence Inversion Principleï¼‰ï¼šä¾èµ–æŠ½è±¡è€Œä¸ä¾èµ–å…·ä½“
4. æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregation Principleï¼‰ï¼šå¤šä¸ªéš”ç¦»çš„æ¥å£ï¼Œæ¯”ä½¿ç”¨å•ä¸ªæ¥å£è¦å¥½
5. è¿ªç±³ç‰¹æ³•åˆ™(æœ€å°‘çŸ¥é“åŸåˆ™)(Demeter Principle)ï¼šæœ€å°‘çŸ¥é“åŸåˆ™ã€‚ä¸€ä¸ªå®ä½“åº”å½“å°½é‡å°‘çš„ä¸å…¶ä»–å®ä½“ä¹‹é—´å‘ç”Ÿç›¸äº’ä½œç”¨
6. åˆæˆå¤ç”¨åŸåˆ™(Composite Reuse Principle)ï¼šå°½é‡ä½¿ç”¨åˆæˆ/èšåˆçš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç»§æ‰¿

## åˆ›å»ºå‹æ¨¡å¼ï¼ˆäº”ç§ï¼‰
### åç§°ï¼šå·¥å‚æ–¹æ³•æ¨¡å¼(Factory Method)
å·¥å‚æ–¹æ³•æ¨¡å¼åˆç§°ä¸ºå·¥å‚æ¨¡å¼ï¼Œä¹Ÿå«è™šæ‹Ÿæ„é€ å™¨(Virtual Constructor)æ¨¡å¼æˆ–è€…å¤šæ€å·¥å‚ï¼Œå®ƒå±äºç±»åˆ›å»ºå‹ã€‚åœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œå·¥å‚çˆ¶ç±»è´Ÿè´£å®šä¹‰åˆ›å»ºäº§å“å¯¹è±¡çš„å…¬å…±æ¥å£ï¼Œè€Œå·¥å‚å­ç±»åˆ™è´Ÿè´£ç”Ÿäº§å…·ä½“çš„äº§å“å¯¹è±¡ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯å°†äº§å“ç±»çš„å®ä¾‹åŒ–æ“ä½œå»¶è¿Ÿåˆ°å·¥å‚å­ä¸­å®Œæˆã€‚
å·¥å‚çˆ¶ç±»:
```java
public interface Blacksmith {
    Weapon manufactureWeapon(WeaponType weaponType);
}
```
å·¥å‚å­ç±»ï¼š
```java
public class ElfBlacksmith implements Blacksmith {
   public Weapon manufactureWeapon(WeaponType weaponType) {
       return new ElfWeapon(weaponType);
   }
}
```

```java
public class OrcBlacksmith implements Blacksmith {
    public Weapon manufactureWeapon(WeaponType weaponType) {
        return new OrcWeapon(weaponType);
    }
}
```

* æ„å›¾ï¼šå®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸€ä¸ªç±»ã€‚Factory Methodä½¿ä¸€ä¸ªç±»çš„å®ä¾‹åŒ–å»¶è¿Ÿåˆ°å…¶å­ç±»ã€‚
* é€‚ç”¨æ€§ï¼š
    1. å½“ä¸€ä¸ªç±»ä¸çŸ¥é“å®ƒæ‰€å¿…é¡»åˆ›å»ºçš„å¯¹è±¡çš„ç±»çš„æ—¶å€™ã€‚
    2. å½“ä¸€ä¸ªç±»å¸Œæœ›ç”±å®ƒçš„å­ç±»æ¥æŒ‡å®šå®ƒæ‰€åˆ›å»ºçš„å¯¹è±¡çš„æ—¶å€™ã€‚
    3. å½“ç±»å°†åˆ›å»ºå¯¹è±¡çš„èŒè´£å§”æ‰˜ç»™å¤šä¸ªå¸®åŠ©å­ç±»ä¸­çš„æŸä¸€ä¸ªï¼Œå¹¶ä¸”ä½ å¸Œæœ›å°†å“ªä¸€ä¸ªå¸®åŠ©å­ç±»æ˜¯ä»£ç†è€…è¿™ä¸€ä¿¡æ¯å±€éƒ¨åŒ–çš„æ—¶å€™ã€‚

#### æ¨¡å¼åˆ†æ
å·¥å‚æ–¹æ³•æ¨¡å¼æ˜¯ç®€å•å·¥å‚æ¨¡å¼çš„è¿›ä¸€æ­¥æŠ½è±¡å’Œæ¨å¹¿ã€‚ç”±äºä½¿ç”¨äº†é¢å‘å¯¹è±¡çš„å¤šæ€æ€§ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼ä¿æŒäº†ç®€å•å·¥å‚æ¨¡å¼çš„æœ‰ç‚¹ï¼Œè€Œä¸”å…‹æœäº†å®ƒçš„ç¼ºç‚¹ã€‚åœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œæ ¸å¿ƒçš„å·¥å‚ç±»ä¸åœ¨è´Ÿè´£æ‰€æœ‰äº§å“çš„åˆ›å»ºï¼Œè€Œæ˜¯å°†å…·ä½“åˆ›å»ºå·¥ä½œäº¤ç»™å­ç±»å»åšã€‚è¿™ä¸ªæ ¸å¿ƒç±»ä»…ä»…è´Ÿè´£ç»™å‡ºå…·ä½“å·¥å‚å¿…é¡»å®ç°çš„æ¥å£ï¼Œè€Œä¸è´Ÿè´£å“ªä¸€ä¸ªäº§å“ç±»è¢«å®ä¾‹åŒ–è¿™ç§ç»†èŠ‚ï¼Œè¿™ä½¿å¾—å·¥å‚æ–¹æ³•æ¨¡å¼å¯ä»¥å…è®¸ç³»ç»Ÿåœ¨ä¸ä¿®æ”¹å·¥å‚è§’è‰²çš„æƒ…å†µä¸‹å¼•å…¥æ–°çš„äº§å“ã€‚

#### ç¼ºç‚¹
* åœ¨æ·»åŠ æ–°äº§å“æ—¶ï¼Œéœ€è¦ç¼–å†™æ–°çš„å…·ä½“äº§å“ç±»ï¼Œè€Œä¸”è¿˜è¦æä¾›ä¸ä¹‹å¯¹åº”çš„å…·ä½“å·¥å‚ç±»ï¼Œç³»ç»Ÿä¸­ç±»çš„ä¸ªæ•°å°†æˆå¯¹å¢åŠ ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ï¼Œæœ‰æ›´å¤šçš„ç±»éœ€è¦ç¼–è¯‘å’Œè¿è¡Œï¼Œä¼šç»™ç³»ç»Ÿå¸¦æ¥ä¸€äº›é¢å¤–çš„å¼€é”€
* ç”±äºè€ƒè™‘åˆ°ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ï¼Œéœ€è¦å¼•å…¥æŠ½è±¡å±‚ï¼Œåœ¨å®¢æˆ·ç«¯ä»£ç ä¸­å‡ä½¿ç”¨æŠ½è±¡å±‚è¿›è¡Œå®šä¹‰ï¼Œå¢åŠ äº†ç³»ç»Ÿçš„æŠ½è±¡æ€§å’Œç†è§£éš¾åº¦

#### Known uses

* [java.util.Calendar](http://docs.oracle.com/javase/8/docs/api/java/util/Calendar.html#getInstance--)
* [java.util.ResourceBundle](http://docs.oracle.com/javase/8/docs/api/java/util/ResourceBundle.html#getBundle-java.lang.String-)
* [java.text.NumberFormat](http://docs.oracle.com/javase/8/docs/api/java/text/NumberFormat.html#getInstance--)
* [java.nio.charset.Charset](http://docs.oracle.com/javase/8/docs/api/java/nio/charset/Charset.html#forName-java.lang.String-)
* [java.net.URLStreamHandlerFactory](http://docs.oracle.com/javase/8/docs/api/java/net/URLStreamHandlerFactory.html#createURLStreamHandler-java.lang.String-)
* [java.util.EnumSet](https://docs.oracle.com/javase/8/docs/api/java/util/EnumSet.html#of-E-)
* [javax.xml.bind.JAXBContext](https://docs.oracle.com/javase/8/docs/api/javax/xml/bind/JAXBContext.html#createMarshaller--)

### åç§°ï¼šæŠ½è±¡å·¥å‚æ¨¡å¼(Abstract Factory)
æŠ½è±¡å·¥å‚æ¨¡å¼æä¾›ä¸€ä¸ªåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ç›¸äº’ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ— é¡»æŒ‡å®šå®ƒä»¬å…·ä½“çš„ç±»ã€‚æŠ½è±¡å·¥å‚æ¨¡å¼åˆç§°ä¸ºKitæ¨¡å¼ï¼Œå±äºå¯¹è±¡åˆ›å»ºå‹æ¨¡å¼ã€‚

```java
public interface KingdomFactory {
    Castle createCastle();

    King createKing();

    Army createArmy();
}
```

```java
public class ElfKingdomFactory implements KingdomFactory {
    public Castle createCastle() {
        return new ElfCastle();
    }

    public King createKing() {
        return new ElfKing();
    }

    public Army createArmy() {
        return new ElfArmy();
    }
}
```

```java
public class OrcKingdomFactory implements KingdomFactory {
    public Castle createCastle() {
        return new OrcCastle();
    }

    public King createKing() {
        return new OrcKing();
    }

    public Army createArmy() {
        return new OrcArmy();
    }
}
```
* æ„å›¾ï¼šæä¾›ä¸€ä¸ªåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ç›¸äº’ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ— éœ€æŒ‡å®šå®ƒä»¬å…·ä½“çš„ç±»ã€‚
* é€‚ç”¨æ€§ï¼š
    1. ä¸€ä¸ªç³»ç»Ÿè¦ç‹¬ç«‹äºå®ƒçš„äº§å“çš„åˆ›å»ºã€ç»„åˆå’Œè¡¨ç¤ºæ—¶ã€‚
    2. ä¸€ä¸ªç³»ç»Ÿè¦ç”±å¤šä¸ªäº§å“ç³»åˆ—ä¸­çš„ä¸€ä¸ªæ¥é…ç½®æ—¶ã€‚
    3. å½“ä½ è¦å¼ºè°ƒä¸€ç³»åˆ—ç›¸å…³çš„äº§å“å¯¹è±¡çš„è®¾è®¡ä»¥ä¾¿è¿›è¡Œè”åˆä½¿ç”¨æ—¶ã€‚
    4. å½“ä½ æä¾›ä¸€ä¸ªäº§å“ç±»åº“ï¼Œè€Œåªæƒ³æ˜¾ç¤ºå®ƒä»¬çš„æ¥å£è€Œä¸æ˜¯å®ç°æ—¶ã€‚

#### ç¼ºç‚¹
- åœ¨æ·»åŠ æ–°çš„äº§å“å¯¹è±¡æ—¶ï¼Œéš¾ä»¥æ‰©å±•æŠ½è±¡å·¥å‚æ¥ç”Ÿäº§æ–°ç§ç±»çš„äº§å“ï¼Œè¿™æ˜¯å› ä¸ºåœ¨æŠ½è±¡å·¥å‚è§’è‰²ä¸­è§„å®šäº†æ‰€æœ‰å¯èƒ½è¢«åˆ›å»ºçš„äº§å“é›†åˆï¼Œè¦æ”¯æŒæ–°ç§ç±»çš„äº§å“å°±æ„å‘³ç€è¦å¯¹æ¥å£è¿›è¡Œæ‰©å±•ï¼Œè€Œè¿™å°†æ¶‰åŠåˆ°å¯¹æŠ½è±¡å·¥å‚è§’è‰²ä»¥åŠå…¶æ‰€æœ‰å­ç±»çš„ä¿®æ”¹ã€‚
- å¼€é—­åŸåˆ™çš„å€¾æ–œæ€§(å¢åŠ æ–°çš„å·¥å‚å’Œäº§å“ç»„å®¹æ˜“ï¼Œå¢åŠ æ–°çš„äº§å“ç­‰çº§ç»“æ„éº»çƒ¦)ã€‚
#### Real world examples

* [javax.xml.parsers.DocumentBuilderFactory](http://docs.oracle.com/javase/8/docs/api/javax/xml/parsers/DocumentBuilderFactory.html)
* [javax.xml.transform.TransformerFactory](http://docs.oracle.com/javase/8/docs/api/javax/xml/transform/TransformerFactory.html#newInstance--)
* [javax.xml.xpath.XPathFactory](http://docs.oracle.com/javase/8/docs/api/javax/xml/xpath/XPathFactory.html#newInstance--)

### åç§°ï¼šå»ºé€ è€…æ¨¡å¼ï¼ˆBuilderï¼‰
*é€šä¿—æ¥è®²ï¼š å…è®¸æ‚¨åˆ›å»ºä¸åŒçš„å¯¹è±¡é£æ ¼ï¼ŒåŒæ—¶é¿å…æ„é€ å™¨æ±¡æŸ“ã€‚ å½“å¯èƒ½æœ‰å‡ ç§é£æ ¼çš„å¯¹è±¡æ—¶å¾ˆæœ‰ç”¨ã€‚ æˆ–è€…å½“åˆ›å»ºå¯¹è±¡æ—¶æ¶‰åŠå¾ˆå¤šæ­¥éª¤*

å°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºä¸å®ƒçš„è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚
å»ºé€ è€…æ¨¡å¼æ˜¯ä¸€æ­¥ä¸€æ­¥åˆ›å»ºä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ï¼Œå®ƒå…è®¸ç”¨æˆ·åªé€šè¿‡æŒ‡å®šå¤æ‚å¯¹è±¡çš„ç±»å‹å’Œå†…å®¹å°±å¯ä»¥æ„å»ºå®ƒä»¬ï¼Œç”¨æˆ·ä¸éœ€è¦çŸ¥é“å†…éƒ¨çš„å…·ä½“æ„å»ºç»†èŠ‚ã€‚

```java
public final class Hero {
    private final Profession profession;
    private final String name;
    private final HairType hairType;
    private final HairColor hairColor;
    private final Armor armor;
    private final Weapon weapon;

    
    private Hero(Builder builder) {
        this.profession = builder.profession;
        this.name = builder.name;
        this.hairColor = builder.hairColor;
        this.hairType = builder.hairType;
        this.weapon = builder.weapon;
        this.armor = builder.armor;
    }
}
```

builder:
```java
public static class Builder {
    private final Profession profession;
    private final String name;
    private HairType hairType;
    private HairColor hairColor;
    private Armor armor;
    private Weapon weapon;
    public Builder(Profession profession, String name) {
        if (profression == null || name == null) {
            throw new IllegalArgumentException("not be null")
        }
        this.profession = profession;
        this.name = name;
    }

    public Builder withHairType(HairType hairType) {
        this.hairType = hairType
        return this;
    }

    public Builder withHairColor(HairColor hairColor) {
        this.hairColor = hairColor;
        return this;
    }

    public Builder withArmor(Armor armor) {
        this.armor = armor;
        return this;
    }

    public Builder withWeapon(Weapon weapon) {
        this.weapon = weapon;
        return this;
    }

    public Hero build() {
        return new Hero(this);
    }

}
```

used:
```java
Hero mage = new Hero.Builder(Profession.Name, "Riobard").withHairColor(HairColor.BLACK).withWeapon(WeaponD.AGGER).build();
```

* æ„å›¾ï¼šå°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºä¸å®ƒçš„è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚
* é€‚ç”¨æ€§ï¼š
    1. å½“åˆ›å»ºå¤æ‚å¯¹è±¡çš„ç®—æ³•åº”è¯¥ç‹¬ç«‹äºè¯¥å¯¹è±¡çš„ç»„æˆéƒ¨åˆ†ä»¥åŠå®ƒä»¬çš„è£…é…æ–¹å¼æ—¶ã€‚
    2. å½“æ„é€ è¿‡ç¨‹å¿…é¡»è¿è¡Œè¢«æ„é€ çš„å¯¹è±¡æœ‰ä¸åŒçš„è¡¨ç¤ºæ—¶ã€‚


#### ä¼˜ç‚¹
* åœ¨å»ºé€ è€…æ¨¡å¼ä¸­ï¼Œå®¢æˆ·ç«¯ä¸å¿…çŸ¥é“äº§å“å†…éƒ¨ç»„æˆçš„ç»†èŠ‚ï¼Œå°†äº§å“æœ¬èº«ä¸äº§å“çš„åˆ›å»ºè¿‡ç¨‹è§£è€¦ï¼Œä½¿å¾—ç›¸åŒçš„åˆ›å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„äº§å“å¯¹è±¡
* æ¯ä¸€ä¸ªå…·ä½“å»ºé€ è€…éƒ½ç›¸å¯¹ç‹¬ç«‹ï¼Œè€Œä¸å…¶ä»–çš„å…·ä½“å»ºé€ è€…æ— å…³ï¼Œå› æ­¤å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ›¿æ¢å…·ä½“å»ºé€ è€…æˆ–å¢åŠ æ–°çš„å…·ä½“å»ºé€ è€…ï¼Œç”¨æˆ·ä½¿ç”¨ä¸åŒçš„å…·ä½“å»ºé€ è€…å³å¯å¾—åˆ°ä¸åŒçš„äº§å“å¯¹è±¡ã€‚
* å¯ä»¥æ›´åŠ ç²¾ç»†åœ°æ§åˆ¶äº§å“çš„åˆ›å»ºè¿‡ç¨‹ã€‚å°†å¤æ‚äº§å“çš„åˆ›å»ºæ­¥éª¤åˆ†è§£åœ¨ä¸åŒçš„æ–¹æ³•ä¸­ï¼Œä½¿å¾—åˆ›å»ºè¿‡ç¨‹æ›´åŠ æ¸…æ™°ï¼Œä¹Ÿæ›´æ–¹ä¾¿ä½¿ç”¨ç¨‹åºæ¥æ§åˆ¶åˆ›å»ºè¿‡ç¨‹ã€‚
* å¢åŠ æ–°çš„å…·ä½“å»ºé€ è€…æ— éœ€ä¿®æ”¹åŸæœ‰ç±»åº“çš„ä»£ç ï¼ŒæŒ‡æŒ¥è€…ç±»é’ˆå¯¹æŠ½è±¡å»ºé€ è€…ç±»ç¼–ç¨‹ï¼Œç³»ç»Ÿæ‰©å±•æ–¹ä¾¿ï¼Œç¬¦åˆâ€œå¼€é—­åŸåˆ™â€

#### ç¼ºç‚¹
* å»ºé€ è€…æ¨¡å¼æ‰€åˆ›å»ºçš„äº§å“ä¸€èˆ¬å…·æœ‰è¾ƒå¤šçš„å…±åŒç‚¹ï¼Œå…¶ç»„æˆéƒ¨åˆ†ç›¸ä¼¼ï¼Œå¦‚æœäº§å“ä¹‹é—´çš„å·®å¼‚æ€§å¾ˆå¤§ï¼Œåˆ™ä¸é€‚åˆä½¿ç”¨å»ºé€ è€…æ¨¡å¼ï¼Œå› æ­¤å…¶ä½¿ç”¨èŒƒå›´å—åˆ°ä¸€å®šçš„é™åˆ¶ã€‚
* å¦‚æœäº§å“çš„å†…éƒ¨å˜åŒ–å¤æ‚ï¼Œå¯èƒ½ä¼šå¯¼è‡´éœ€è¦å®šä¹‰å¾ˆå¤šå…·ä½“å»ºé€ è€…ç±»æ¥å®ç°è¿™ç§å˜åŒ–ï¼Œå¯¼è‡´ç³»ç»Ÿå˜å¾—å¾ˆåºå¤§ã€‚


#### Real world examples

* [java.lang.StringBuilder](http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuilder.html)
* [java.nio.ByteBuffer](http://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html#put-byte-) as well as similar buffers such as FloatBuffer, IntBuffer and so on.
* [java.lang.StringBuffer](http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuffer.html#append-boolean-)
* All implementations of [java.lang.Appendable](http://docs.oracle.com/javase/8/docs/api/java/lang/Appendable.html)
* [Apache Camel builders](https://github.com/apache/camel/tree/0e195428ee04531be27a0b659005e3aa8d159d23/camel-core/src/main/java/org/apache/camel/builder)

### åç§°ï¼šåŸå‹æ¨¡å¼ï¼ˆPrototypeï¼‰
* æ„å›¾ï¼šç”¨åŸå‹å®ä¾‹æŒ‡å®šåˆ›å»ºå¯¹è±¡çš„ç§ç±»ï¼Œå¹¶ä¸”é€šè¿‡æ‹·è´è¿™äº›åŸå‹åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚
* é€‚ç”¨æ€§ï¼šâ‘ å½“è¦å®ä¾‹åŒ–çš„ç±»æ˜¯åœ¨è¿è¡Œæ—¶åˆ»æŒ‡å®šæ—¶ï¼Œä¾‹å¦‚ï¼Œé€šè¿‡åŠ¨æ€è£…è½½ï¼›æˆ–è€…ä¸ºäº†é¿å…åˆ›å»ºä¸€ä¸ªä¸äº§å“ç±»å±‚æ¬¡å¹³è¡Œçš„å·¥å‚ç±»å±‚æ¬¡æ—¶ï¼›æˆ–è€…å½“ä¸€ä¸ªç±»çš„å®ä¾‹åªèƒ½æœ‰å‡ ä¸ªä¸åŒçŠ¶æ€ç»„åˆä¸­çš„ä¸€ç§æ—¶ã€‚å»ºç«‹ç›¸åº”æ•°ç›®çš„åŸå‹å¹¶å…‹éš†å®ƒä»¬å¯èƒ½æ¯”æ¯æ¬¡ç”¨åˆé€‚çš„çŠ¶æ€æ‰‹å·¥å®ä¾‹åŒ–è¯¥ç±»æ›´æ–¹ä¾¿ä¸€äº›ã€‚

### åç§°ï¼šå•ä¾‹æ¨¡å¼ï¼ˆSingletonï¼‰
* æ„å›¾ï¼šä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ã€‚
* é€‚ç”¨æ€§ï¼š
    1. å½“ç±»åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹è€Œä¸”å®¢æˆ·å¯ä»¥ä»ä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„è®¿é—®ç‚¹è®¿é—®å®ƒæ—¶ã€‚
    2. å½“è¿™ä¸ªå”¯ä¸€çš„å®ä¾‹åº”è¯¥æ˜¯é€šè¿‡å­ç±»åŒ–å¯æ‰©å±•çš„ï¼Œå¹¶ä¸”å®¢æˆ·åº”è¯¥æ— éœ€æ›´æ”¹ä»£ç å°±èƒ½ä½¿ç”¨ä¸€ä¸ªæ‰©å±•çš„å®ä¾‹æ—¶ã€‚

## ç»“æ„å‹æ¨¡å¼ï¼ˆä¸ƒç§ï¼‰
### åç§°ï¼šAdapter(é€‚é…å™¨æ¨¡å¼)
åœ¨é€‚é…å™¨æ¨¡å¼ä¸­å¯ä»¥å®šä¹‰ä¸€ä¸ªåŒ…è£…ç±»ï¼ŒåŒ…è£…ä¸å…¼å®¹æ¥å£çš„å¯¹è±¡ï¼Œè¿™ä¸ªåŒ…è£…ç±»æŒ‡çš„å°±æ˜¯é€‚é…å™¨(Adapter)ï¼Œå®ƒæ‰€åŒ…è£…çš„å¯¹è±¡å°±æ˜¯æ˜¯é€‚é…è€…(Adaptee)ï¼Œå³è¢«é€‚é…çš„ç±»ã€‚
é€‚é…å™¨æä¾›å®¢æˆ·ç±»éœ€è¦çš„æ¥å£ï¼Œé€‚é…å™¨çš„å®ç°å°±æ˜¯æŠŠå®¢æˆ·ç±»çš„è¯·æ±‚è½¬åŒ–ä¸ºå¯¹é€‚é…è€…çš„ç›¸åº”æ¥å£çš„è°ƒç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šå½“å®¢æˆ·ç±»è°ƒç”¨é€‚é…å™¨çš„æ–¹æ³•æ—¶ï¼Œåœ¨é€‚é…å™¨ç±»çš„å†…éƒ¨å°†è°ƒç”¨é€‚é…è€…ç±»çš„æ–¹æ³•ï¼Œè€Œè¿™ä¸ªè¿‡ç¨‹å¯¹å®¢æˆ·ç±»æ˜¯é€æ˜çš„ï¼Œå®¢æˆ·ç±»å¹¶ä¸ç›´æ¥è®¿é—®é€‚é…è€…ç±»ã€‚å› æ­¤ï¼Œé€‚é…å™¨å¯ä»¥ä½¿ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½äº¤äº’çš„ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚è¿™å°±æ˜¯é€‚é…å™¨æ¨¡å¼çš„æ¨¡å¼åŠ¨æœº

é€‚é…æ¨¡å¼(Adapter Pattern)ï¼šå°†ä¸€ä¸ªæ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦ä¸€ä¸ªæ¥å£ï¼Œé€‚é…å™¨æ¨¡å¼ä½¿æ¥å£ä¸å…¼å®¹çš„é‚£äº›ç±»å¯ä»¥ä¸€èµ·å·¥ä½œï¼Œå…¶åˆ«åä¸ºåŒ…è£…(Wrapper)ã€‚é€‚é…å™¨æ¨¡å¼æ—¢å¯ä»¥åšä¸ºç±»ç»“æ„å‹æ¨¡å¼ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå¯¹è±¡ç»“æ„å‹æ¨¡å¼ã€‚

Client
```java
public class Captain implements RowingBoat {
    private RowingBoat rowingBoat;

    public Captain() {

    }

    public Captain(RowingBoat rowingBoat) {
        this.rowingBoat = rowingBoat;
    }

    public void setRowingBoat(RowingBoat rowingBoat) {
        this.rowingBoat = rowingBoat;
    }

    @Override
    public void row() {
        rowingBoat.row();
    }
}
```

Adaptee
```java
public class FishingBoat {

    public void sail() {
        log.i("The fishing boat is sailing")
    }
}
```

Adapter
```java
public class FinishBoatAdapter implements RowingBoat {

    private FinishBoatAdapter boat;

    public FinishBoatAdapter() {
        boat = new FinishBoat();
    }

    @Override
    public void row() {
        boat.sail();
    }
}
```


* æ„å›¾ï¼šå°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦ä¸€ä¸ªæ¥å£ã€‚adapteræ¨¡å¼ä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„é‚£äº›ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚
* é€‚ç”¨æ€§ï¼š
    1. ä½ æƒ³ä½¿ç”¨ä¸€ä¸ªå·²ç»å­˜åœ¨çš„ç±»ï¼Œè€Œå®ƒçš„æ¥å£ä¸ç¬¦åˆä½ çš„éœ€æ±‚ã€‚
    2. ä½ æƒ³åˆ›å»ºä¸€ä¸ªå¯ä»¥å¤ç”¨çš„ç±»ï¼Œè¯¥ç±»å¯ä»¥ä¸å…¶ä»–ä¸æƒ³å…³æˆ–ä¸å¯é¢„è§çš„ç±»ï¼ˆå³é‚£äº›æ¥å£å¯èƒ½ä¸ä¸€å®šå…¼å®¹çš„ç±»ï¼‰ååŒå·¥ä½œã€‚
    3. (ä»…ä½¿ç”¨å¯¹è±¡adapter)ä½ æƒ³ä½¿ç”¨ä¸€äº›å·²ç»å­˜åœ¨çš„å­ç±»ï¼Œä½†æ˜¯ä¸å¯èƒ½å¯¹æ¯ä¸€ä¸ªéƒ½è¿›è¡Œå­ç±»åŒ–ä»¥åŒ¹é…å®ƒä»¬çš„æ¥å£ã€‚å¯¹è±¡é€‚é…å™¨å¯ä»¥é€‚é…å®ƒçš„çˆ¶ç±»æ¥å£ã€‚

### ä¼˜ç‚¹
* å°†ç›®æ ‡ç±»å’Œé€‚é…è€…ç±»è§£è€¦ï¼Œé€šè¿‡å¼•å…¥ä¸€ä¸ªé€‚é…ç±»æ¥é‡ç”¨ç°æœ‰çš„é€‚é…è€…ç±»ï¼Œè€Œæ— éœ€ä¿®æ”¹åŸæœ‰ä»£ç 
* å¢åŠ ç±»çš„é€æ˜æ€§å’Œå¤ç”¨æ€§ï¼Œå°†å…·ä½“çš„å®ç°å°è£…åœ¨é€‚é…è€…ç±»ä¸­ï¼Œå¯¹äºå®¢æˆ·ç«¯ç±»æ¥è¯´é€æ˜çš„ï¼Œè€Œä¸”äº†æé«˜äº†é€‚é…è€…çš„å¤ç”¨æ€§
* çµæ´»æ€§å’Œæ‰©å±•æ€§éƒ½éå¸¸å¥½ï¼Œé€šè¿‡ä½¿ç”¨é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ›´æ¢é€‚é…å™¨ï¼Œä¹Ÿå¯ä»¥åœ¨ä¸ä¿®æ”¹åŸæœ‰ä»£ç çš„åŸºç¡€ä¸Šå¢åŠ æ–°çš„é€‚é…å™¨ç±»ï¼Œç¬¦åˆâ€œå¼€é—­åŸåˆ™â€

**ç±»é€‚é…æ¨¡å¼å…·æœ‰å¦‚ä¸‹ä¼˜ç‚¹**
ç”±äºé€‚é…å™¨ç±»é€‚é…è€…ç±»çš„å­ç±»ï¼Œå› æ­¤å¯ä»¥åœ¨é€‚é…å™¨ç±»ä¸­ç½®æ¢ä¸€äº›é€‚é…è€…çš„æ–¹æ³•ï¼Œä½¿å¾—é€‚é…çš„çµæ´»æ€§æ›´å¼º

**å¯¹è±¡é€‚é…å™¨æ¨¡å¼å…·æœ‰å¦‚ä¸‹ä¼˜ç‚¹**
ä¸€ä¸ªå¯¹è±¡é€‚é…å™¨å¯ä»¥æŠŠå¤šä¸ªä¸åŒçš„é€‚é…è€…é€‚é…åˆ°åŒä¸€ä¸ªç›®æ ‡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒåŒä¸€ä¸ªé€‚é…å™¨å¯ä»¥æŠŠé€‚é…è€…ç±»å’Œå®ƒçš„å­ç±»éƒ½é€‚é…åˆ°ç›®æ ‡æ¥å£

#### ç¼ºç‚¹
ç±»é€‚é…å™¨å¯¹äºä¸æ”¯æŒå¤šé‡ç»§æ‰¿çš„è¯­è¨€ï¼Œä¸€æ¬¡æœ€å¤šåªèƒ½é€‚é…ä¸€ä¸ªé€‚é…è€…ç±»ï¼Œè€Œä¸”ç›®æ ‡æŠ½è±¡ç±»åªèƒ½ä¸ºæŠ½è±¡ï¼Œä¸èƒ½ä¸ºå…·ä½“ç±»ï¼Œå…¶ä½¿ç”¨æœ‰ä¸€å®šçš„å±€é™æ€§ï¼Œä¸èƒ½è®²ä¸€ä¸ªé€‚é…è€…ç±»å’Œå®ƒçš„å­ç±»éƒ½é€‚é…åˆ°ç›®æ ‡æ¥å£

å¯¹è±¡é€‚é…å™¨æ¨¡å¼ç½®æ¢æ—¶é€‚é…è€…çš„æ–¹æ³•ä¸å®¹æ˜“

#### Real world examples
* [java.util.Arrays#asList()](http://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#asList%28T...%29)
* [java.util.Collections#list()](https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#list-java.util.Enumeration-)
* [java.util.Collections#enumeration()](https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#enumeration-java.util.Collection-)
* [javax.xml.bind.annotation.adapters.XMLAdapter](http://docs.oracle.com/javase/8/docs/api/javax/xml/bind/annotation/adapters/XmlAdapter.html#marshal-BoundType-)


### åç§°ï¼šBridge(æ¡¥æ¥æ¨¡å¼)
æ¡¥æ¥æ¨¡å¼å°†ç»§æ‰¿å…³ç³»è½¬æ¢ä¸ºå…³è”å…³ç³»ï¼Œä»è€Œé™ä½ç±»ä¸ç±»ä¹‹é—´çš„è€¦åˆï¼Œå‡å°‘äº†ä»£ç ç¼–å†™é‡ã€‚


* æ„å›¾ï¼šå°†æŠ½è±¡éƒ¨åˆ†ä¸å®ƒçš„å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚
 (å…¶å®å°±æ˜¯ï¼Œå­ç±»æœ‰ä¸¤ä¸ªç»´åº¦çš„æ’åˆ—ç»„åˆ ç”¨æ¡¥æ¥æ¨¡å¼)
  è„±è€¦ï¼šè„±è€¦å°±æ˜¯å°†æŠ½è±¡åŒ–å’Œå®ç°åŒ–ä¹‹é—´çš„è€¦åˆè§£è„±å¼€ï¼Œæˆ–è€…è¯´æ˜¯å°†å®ƒä»¬ä¹‹é—´çš„å¼ºå…³è”æ¢æˆå¼±å…³è”ï¼Œå°†ä¸¤ä¸ªè§’è‰²ä¹‹é—´çš„ç»§æ‰¿å…³ç³»
  æ”¹ä¸ºå…³è”å…³ç³»ã€‚æ¡¥æ¥æ¨¡å¼ä¸­æ‰€è°“çš„è„±è€¦ï¼Œå°±æ˜¯æŒ‡ä¸€ä¸ªè½¯ä»¶ç³»ç»Ÿçš„æŠ½è±¡åŒ–å’Œå®ç°åŒ–ä¹‹é—´ä½¿ç”¨å…³è”å…³ç³»è€Œä¸æ˜¯ç»§æ‰¿å…³ç³»ã€‚
* é€‚ç”¨æ€§ï¼š
    1. ä½ ä¸å¸Œæœ›åœ¨æŠ½è±¡å’Œå®ƒçš„å®ç°éƒ¨åˆ†ä¹‹é—´æœ‰ä¸€ä¸ªå›ºå®šçš„ç»‘å®šå…³ç³»ã€‚ä¾‹å¦‚è¿™ç§æƒ…å†µå¯èƒ½å› ä¸ºï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶åˆ»å®ç°éƒ¨åˆ†åº”å¯ä»¥è¢«é€‰æ‹©æˆ–è€…åˆ‡æ¢ã€‚
    2. ç±»çš„æŠ½è±¡ä»¥åŠå®ƒçš„å®ç°éƒ½å¯ä»¥é€šè¿‡ç”Ÿæˆå­ç±»çš„æ–¹æ³•åŠ ä»¥æ‰©å……ã€‚è¿™æ—¶Bridgeæ¨¡å¼ä½¿ä½ å¯ä»¥å¯¹ä¸åŒçš„æŠ½è±¡æ¥å£å’Œå®ç°éƒ¨åˆ†è¿›è¡Œç»„åˆï¼Œå¹¶åˆ†åˆ«å¯¹å®ƒä»¬è¿›è¡Œæ‰©å……ã€‚
    3. å¯¹ä¸€ä¸ªæŠ½è±¡çš„å®ç°éƒ¨åˆ†çš„ä¿®æ”¹åº”å¯¹å®¢æˆ·ä¸äº§ç”Ÿå½±å“ï¼Œå³å®¢æˆ·çš„ä»£ç ä¸å¿…é‡æ–°ç¼–è¯‘ã€‚
    4. æœ‰è®¸å¤šç±»è¦ç”Ÿæˆã€‚è¿™æ ·ä¸€ç§ç±»å±‚æ¬¡ç»“æ„è¯´æ˜ä½ å¿…é¡»å°†ä¸€ä¸ªå¯¹è±¡åˆ†è§£æˆä¸¤ä¸ªéƒ¨åˆ†ã€‚ç§°è¿™ç§ç±»å±‚æ¬¡ç»“æ„ä¸ºâ€œåµŒå¥—çš„æ™®åŒ–â€ï¼ˆnested generalizations ï¼‰
    5. ä½ æƒ³åœ¨å¤šä¸ªå¯¹è±¡é—´å…±äº«å®ç°ï¼Œä½†åŒæ—¶è¦æ±‚å®¢æˆ·å¹¶ä¸çŸ¥é“è¿™ä¸€ç‚¹ã€‚

```java
public interface Weapon {
    void wield();

    void swing();

    void unwield();

    Enchantment getEnchantment();
}
```

```java
public class Sword implements Weapon {
    private final Enchantment enchantment;

    public Sword(Enchantment enchantment) {
        this.enchantment = enchantment;
    }

    @Override
    public void wield() {
        log.i("å’–å–±æ£’");
        enchantment.onActivate();
    }

    @Override
    public void swing() {
        log.i("é‚£ä¹ˆå¤šè·¯äºº")
        enchantment.apply();
    }

    @Override
    public void unwield() {
        log.i("ç”²");
        enchantment.onDeactivate();
    }

    @Override
    public Enchantment getEnchantment() {
        return enchantment;
    }
}
```

```java
public class Hammer implements Weapon {

    private static Enchantment enchantment;

    public Hammer(Enchantment enchaantment) {
        this.enchantment = enchantment;
    }

    @Override
    public void wield() {
        log.i("æ˜Ÿæ˜Ÿ")
        enchantment.onActivate();
    }

    @Override
    public void swing() {
        enchantment.apply();
    }

    @Override
    public void unwield() {
        enchantment.onDeactivate();
    }

    @Override
    public void unwield() {
        enchantment.onDeactivate();
    }

    @Override
    public Enchantment getEnchantment() {
        return enchantment;
    }
}
```

```java
public interface Enchantment {
    void onActivate();

    void apply();

    void onDeactivate();
}
```

```java
public class FlyingEnchantment implements Enchantment {
    public void onActiviate() {
        log.i("ğŸ¶");
    }

    public void apply() {
        log.i("fly apply");
    }

    public void onDeactivate() {
        log.i("fly ondeactivate");
    }
}
```

```java
public class SoulEatingEnchantment implements Enchantment {
    public void onActivate() {
        log.i("soul activate");
    }

    public void apply() {
        log.i("soul apply");
    }

    public void onDeactivate() {
        log.i("soul deactivate")
    }
}
```

#### ä¼˜ç‚¹
- åˆ†ç¦»æŠ½è±¡æ¥å£åŠå…¶å®ç°éƒ¨åˆ†
- æ¡¥æ¥æ¨¡å¼æœ‰æ—¶ç±»ä¼¼äºå¤šç»§æ‰¿æ–¹æ¡ˆï¼Œä½†æ˜¯å¤šç»§æ‰¿æ–¹æ¡ˆè¿èƒŒäº†ç±»çš„å•ä¸€èŒè´£åŸåˆ™ï¼Œå¤ç”¨æ€§è¾ƒå·®ï¼Œè€Œä¸”å¤šç»§æ‰¿ç»“æ„ä¸­ç±»çš„ä¸ªæ•°éå¸¸åºå¤§ï¼Œæ¡¥æ¥æ¨¡å¼æ˜¯æ¯”å¤šç»§æ‰¿æ–¹æ¡ˆæ›´å¥½çš„è§£å†³æ–¹æ³•ã€‚
- æ¡¥æ¥æ¨¡å¼æé«˜äº†ç³»ç»Ÿçš„å¯æ‰©å……æ€§ï¼Œåœ¨ä¸¤ä¸ªå˜åŒ–å”¯ç‹¬ä¸­ä»»æ„æ‰©å±•ä¸€ä¸ªç»´åº¦ï¼Œéƒ½ä¸éœ€è¦ä¿®æ”¹åŸæœ‰ç³»ç»Ÿã€‚
- å®ç°ç»†èŠ‚å¯¹å®¢æˆ·é€æ˜ï¼Œå¯ä»¥å¯¹ç”¨æˆ·éšè—å®ç°ç»†èŠ‚

#### ç¼ºç‚¹
- æ¡¥æ¥æ¨¡å¼å¼•å…¥ä¼šå¢åŠ ç³»ç»Ÿçš„ç†è§£å’Œè®¾è®¡éš¾åº¦ï¼Œç”±äºèšåˆå…³è”å…³ç³»å»ºç«‹åœ¨æŠ½è±¡å±‚ï¼Œè¦æ±‚å¼€å‘è€…é’ˆå¯¹æŠ½è±¡è¿›è¡Œè®¾è®¡å’Œç¼–ç¨‹
- æ¡¥æ¥æ¨¡å¼è¦æ±‚æ­£ç¡®è¯†åˆ«å‡ºç³»ç»Ÿä¸­ä¸¤ä¸ªç‹¬ç«‹å˜åŒ–çš„ç»´åº¦ï¼Œå› æ­¤å…¶ä½¿ç”¨èŒƒå›´æœ‰ä¸€å®šçš„å±€é™

### åç§°ï¼šComposite(ç»„åˆæ¨¡å¼)
* æ„å›¾ï¼šå°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤º"éƒ¨åˆ†-æ•´ä½“"çš„å±‚æ¬¡ç»“æ„ã€‚compositeä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚
* é€‚ç”¨æ€§ï¼š
    1. ä½ æƒ³è¡¨è¾¾å¯¹è±¡çš„éƒ¨åˆ†-æ•´ä½“å±‚æ¬¡ç»“æ„ã€‚
    2. ä½ å¸Œæœ›ç”¨æˆ·å¿½ç•¥ç»„åˆå¯¹è±¡ä¸å•ä¸ªå¯¹è±¡çš„ä¸åŒï¼Œç”¨æˆ·å°†ç»Ÿä¸€åœ°ä½¿ç”¨ç»„åˆæœºæ„ä¸­çš„æ‰€æœ‰å¯¹è±¡ã€‚

ç»„åˆæ¨¡å¼è®©ä½ å¯ä»¥ä¼˜åŒ–å¤„ç†é€’å½’æˆ–åˆ†çº§æ•°æ®ç»“æ„ã€‚è®¡ç®—æœºæ–‡ä»¶ç³»ç»Ÿå°±æ˜¯ä»¥é€’å½’ç»“æ„æ¥ç»„ç»‡çš„ã€‚å¦‚æœä½ æƒ³è¦æè¿°è¿™æ ·çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥ä½¿ç”¨ç»„åˆæ¨¡å¼ã€‚

ç»„åˆæ¨¡å¼è§£è€¦äº†å®¢æˆ·ç¨‹åºä¸å¤æ‚å…ƒç´ å†…éƒ¨ç»“æ„ï¼Œä»è€Œä½¿å®¢æˆ·ç«¯ç¨‹åºå¯ä»¥åƒå¤„ç†ç®€å•å…ƒç´ ä¸€æ ·å¤„ç†å¤æ‚å…ƒç´ ã€‚

#### Real world examples

* [java.awt.Container](http://docs.oracle.com/javase/8/docs/api/java/awt/Container.html) and [java.awt.Component](http://docs.oracle.com/javase/8/docs/api/java/awt/Component.html)
* [Apache Wicket](https://github.com/apache/wicket) component tree, see [Component](https://github.com/apache/wicket/blob/91e154702ab1ff3481ef6cbb04c6044814b7e130/wicket-core/src/main/java/org/apache/wicket/Component.java) and [MarkupContainer](https://github.com/apache/wicket/blob/b60ec64d0b50a611a9549809c9ab216f0ffa3ae3/wicket-core/src/main/java/org/apache/wicket/MarkupContainer.java)


### åç§°ï¼šFacade(å¤–è§‚æ¨¡å¼)
* æ„å›¾ï¼šä¸ºå­ç³»ç»Ÿä¸­çš„ä¸€ç»„æ¥å£æä¾›ä¸€ä¸ªä¸€è‡´çš„ç•Œé¢ï¼ŒFacadæ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä½¿å¾—è¿™ä¸€å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“ä½¿ç”¨ã€‚
* é€‚ç”¨æ€§ï¼šâ‘ å½“ä½ è¦ä¸ºä¸€ä¸ªå¤æ‚å­ç³»ç»Ÿæä¾›ä¸€ä¸ªç®€å•æ¥å£æ—¶ã€‚å­ç³»ç»Ÿå¾€å¾€å› ä¸ºä¸æ–­æ¼”åŒ–è€Œå˜å¾—è¶Šæ¥è¶Šå¤æ‚ã€‚å¤§å¤šæ•°æ¨¡å¼ä½¿ç”¨æ—¶éƒ½ä¼šäº§ç”Ÿæ›´å¤šæ›´å°çš„ç±»ã€‚
è¿™ä½¿å¾—å­ç³»ç»Ÿæ›´å…·å¯é‡ç”¨æ€§ï¼Œä¹Ÿæ›´å®¹æ˜“å¯¹å­ç³»ç»Ÿè¿›è¡Œå®šåˆ¶ï¼Œä½†è¿™ä¹Ÿç»™é‚£äº›ä¸éœ€è¦å®šåˆ¶çš„å­ç³»ç»Ÿçš„ç”¨æˆ·å¸¦æ¥ä¸€äº›ä½¿ç”¨ä¸Šçš„å›°éš¾ã€‚facadå¯ä»¥æä¾›ä¸€ä¸ªç®€å•çš„ç¼ºçœè§†å›¾ï¼Œ
è¿™ä¸€è§†å›¾å¯¹å¤§å¤šæ•°ç”¨æˆ·æ¥è¯´å·²ç»è¶³å¤Ÿï¼Œè€Œé‚£äº›éœ€è¦æ›´å¤šçš„å¯å®šåˆ¶æ€§çš„ç”¨æˆ·å¯ä»¥è¶Šè¿‡facadeå±‚ã€‚
â‘¡å®¢æˆ·ç¨‹åºä¸æŠ½è±¡ç±»çš„å®ç°éƒ¨åˆ†ä¹‹é—´å­˜åœ¨ç€å¾ˆå¤§çš„ä¾èµ–æ€§ã€‚å¼•å…¥facadeå°†è¿™ä¸ªå­ç³»ç»Ÿä¸å®¢æˆ·ä»¥åŠå…¶ä»–å­ç³»ç»Ÿåˆ†ç¦»ï¼Œå¯ä»¥æé«˜å­ç³»ç»Ÿçš„ç‹¬ç«‹æ€§å’Œå¯ç§»æ¤æ€§ã€‚
â‘¢å½“ä½ éœ€è¦æ„å»ºä¸€ä¸ªå±‚æ¬¡ç»“æ„çš„å­ç³»ç»Ÿæ—¶ï¼Œä½¿ç”¨facadeæ¨¡å¼å®šä¹‰å­ç³»ç»Ÿä¸­æ¯å±‚çš„å…¥å£ç‚¹ã€‚å¦‚æœå­ç³»ç»Ÿä¹‹é—´æ˜¯ç›¸äº’ä¾èµ–çš„ï¼Œä½ å¯ä»¥è®©å®ƒä»¬ä»…é€šè¿‡facadeè¿›è¡Œé€šè®¯ï¼Œä»è€Œç®€åŒ–äº†å®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚

### åç§°ï¼šFlyweight(äº«å…ƒæ¨¡å¼)
* æ„å›¾ï¼šè¿ç”¨å…±äº«æŠ€æœ¯æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦çš„å¯¹è±¡ã€‚
* é€‚ç”¨æ€§ï¼šâ‘ ä¸€ä¸ªåº”ç”¨ç¨‹åºä½¿ç”¨äº†å¤§é‡çš„å¯¹è±¡ã€‚
â‘¡å®Œå…¨ç”±äºä½¿ç”¨å¤§é‡çš„å¯¹è±¡ï¼Œé€ æˆå¾ˆå¤§çš„å­˜å‚¨å¼€é”€ã€‚
â‘¢å¯¹è±¡çš„å¤§å¤šæ•°çŠ¶æ€éƒ½å¯å˜ä¸ºå¤–éƒ¨çŠ¶æ€ã€‚
â‘£å¦‚æœåˆ é™¤å¯¹è±¡çš„å¤–éƒ¨çŠ¶ä½“ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ç›¸å¯¹è¾ƒå°‘çš„å…±äº«å¯¹è±¡å–ä»£å¾ˆå¤šç»„å¯¹è±¡ã€‚
â‘¤åº”ç”¨ç¨‹åºä¸ä¾èµ–äºå¯¹è±¡æ ‡è¯†ã€‚ç”±äºFlyweightå¯¹è±¡å¯ä»¥è¢«å…±äº«ï¼Œå¯¹äºæ¦‚å¿µä¸Šæ˜æ˜¾æœ‰åˆ«çš„å¯¹è±¡ï¼Œæ ‡è¯†æµ‹è¯•å°†è¿”å›çœŸå€¼ã€‚


### åç§°ï¼šDecorator(è£…é¥°å™¨æ¨¡å¼)
è£…é¥°æ¨¡å¼ä»¥å¯¹å®¢æˆ·é€æ˜çš„æ–¹å¼åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡é™„ä»¶ä¸Šæ›´å¤šçš„è´£ä»»ï¼Œæ¢è¨€ä¹‹ï¼Œå®¢æˆ·ç«¯å¹¶ä¸ä¼šè§‰å¾—å¯¹è±¡åœ¨è£…é¥°å‰å’Œè£…é¥°åæœ‰ä»€ä¹ˆä¸åŒã€‚è£…é¥°æ¨¡å¼å¯ä»¥åœ¨ä¸éœ€è¦åˆ›é€ æ›´å¤šå­ç±»çš„æƒ…å†µä¸‹ï¼Œå°†å¯¹è±¡çš„åŠŸèƒ½åŠ ä»¥æ‰©å±•ã€‚è¿™å°±æ˜¯è£…é¥°æ¨¡å¼çš„åŠ¨æœºã€‚

* æ„å›¾ï¼šåŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ã€‚å°±å¢åŠ åŠŸèƒ½æ¥è¯´ï¼Œdecoratoræ¨¡å¼ç›¸æ¯”ç”Ÿæˆå­ç±»æ›´ä¸ºçµæ´»ã€‚å…¶åˆ«åä¹Ÿå¯ä»¥ç§°ä¸ºåŒ…è£…å™¨(Wrapper)ï¼Œä¸é€‚é…å™¨æ¨¡å¼çš„åˆ«åç›¸åŒã€‚
* é€‚ç”¨æ€§ï¼š
    1. åœ¨ä¸å½±å“å…¶ä»–å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œä»¥åŠ¨æ€ã€é€æ˜çš„æ–¹å¼ç»™å•ä¸ªå¯¹è±¡æ·»åŠ èŒè´£
    2. å¤„ç†é‚£äº›ä¸å¯æ’¤é”€çš„èŒè´£ã€‚
    3. å½“ä¸èƒ½ç”Ÿæˆå­ç±»çš„æ–¹æ³•è¿›è¡Œæ‰©å……æ—¶ã€‚ä¸€ç§æƒ…å†µæ˜¯ï¼Œå¯èƒ½æœ‰å¤§é‡çš„æ‰©å±•ï¼Œä¸ºæ”¯æŒæ¯ä¸€ç§ç»„åˆå°†äº§ç”Ÿå¤§é‡çš„å­ç±»ï¼Œä½¿å¾—å­ç±»æ•°æ®å‘ˆçˆ†ç‚¸æ€§å¢é•¿ã€‚
å¦ä¸€ç§æƒ…å†µå¯èƒ½æ˜¯å› ä¸ºç±»å®šä¹‰è¢«éšè—ï¼Œæˆ–ç±»å®šä¹‰ä¸èƒ½ç”¨äºç”Ÿæˆå­ç±»ã€‚
Interface:
```java
public interface Troll {
    void attach();

    int getAttackPower();

    void fleeBattle();
}
```
Decorator:
```java
public ClubbedTroll implements Troll {
    private Troll decorated;

    public ClubbedTroll (Troll decorated) {
        this.decorated = decorated;
    }

    @Override
    public void attack() {
        decorated.attach();
    }

    @Override
    public void getAttackPower() {
        decorated.getAttackPower() + 10;
    }

    @Override
    public void fleeBattle() {
        decorated.fleeBattle();
    }
}
```

```java
public class SimpleTroll implements Troll {
    @Override
    public void attach() {
        log.i("the troll tries to grab you!");
    }
    @Override
    public int getAttackPower() {
        return 10;
    }
    @Override
    public void fleeBattle() {
        log.i("The troll shrieks in horror and runs away!");
    }
}
```
### ç¼ºç‚¹
è£…é¥°æ¨¡å¼çš„ä¼˜ç‚¹ï¼š
- è£…é¥°æ¨¡å¼ä¸ç»§æ‰¿å…³ç³»çš„ç›®çš„éƒ½æ˜¯è¦æ‰©å±•å¯¹è±¡çš„åŠŸèƒ½ï¼Œä½†æ˜¯è£…é¥°æ¨¡å¼å¯ä»¥æä¾›æ¯”ç»§æ‰¿æ›´å¤šçš„çµæ´»æ€§ã€‚
- å¯ä»¥é€šè¿‡ä¸€ç§åŠ¨æ€çš„æ–¹å¼æ¥æ‰©å±•ä¸€ä¸ªå¯¹è±¡çš„åŠŸèƒ½ï¼Œé€šè¿‡é…ç½®æ–‡ä»¶å¯ä»¥åœ¨è¿è¡Œæ—¶é€‰æ‹©ä¸åŒçš„è£…é¥°å™¨ï¼Œä»è€Œå®ç°ä¸åŒçš„è¡Œä¸ºã€‚
- é€šè¿‡ä½¿ç”¨ä¸åŒçš„å…·ä½“è£…é¥°å™¨ä»¥åŠè¿™äº›è£…é¥°ç±»çš„æ’åˆ—ç»„åˆï¼Œå¯ä»¥åˆ›é€ å‡ºå¾ˆå¤šä¸åŒè¡Œä¸ºçš„ç»„åˆã€‚å¯ä»¥ä½¿ç”¨å¤šä¸ªå…·ä½“è£…é¥°ç±»æ¥è£…é¥°åŒä¸€å¯¹è±¡ï¼Œå¾—åˆ°åŠŸèƒ½æ›´ä¸ºå¼ºå¤§çš„å¯¹è±¡ã€‚
- å…·ä½“æ„å»ºç±»ä¸å…·ä½“ä¿®é¥°ç±»å¯ä»¥ç‹¬ç«‹å˜åŒ–ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦å¢åŠ æ–°çš„å…·ä½“æ„ä»¶ç±»å’Œå…·ä½“ä¿®é¥°ç±»ï¼Œåœ¨ä½¿ç”¨æ—¶å†å¯¹å…¶è¿›è¡Œç»„åˆï¼ŒåŸæœ‰ä»£ç æ— é¡»æ”¹å˜ï¼Œç¬¦åˆ"å¼€é—­åŸåˆ™"


#### Real world examples
 * [java.io.InputStream](http://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html), [java.io.OutputStream](http://docs.oracle.com/javase/8/docs/api/java/io/OutputStream.html),
 [java.io.Reader](http://docs.oracle.com/javase/8/docs/api/java/io/Reader.html) and [java.io.Writer](http://docs.oracle.com/javase/8/docs/api/java/io/Writer.html)
 * [java.util.Collections#synchronizedXXX()](http://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#synchronizedCollection-java.util.Collection-)
 * [java.util.Collections#unmodifiableXXX()](http://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#unmodifiableCollection-java.util.Collection-)
 * [java.util.Collections#checkedXXX()](http://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#checkedCollection-java.util.Collection-java.lang.Class-)

### åç§°ï¼šProxy(ä»£ç†æ¨¡å¼)
* æ„å›¾ï¼šä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚
* é€‚ç”¨æ€§ï¼šåœ¨éœ€è¦æ¯”è¾ƒé€šç”¨å’Œå¤æ‚çš„å¯¹è±¡æŒ‡é’ˆä»£æ›¿ç®€å•çš„æŒ‡é’ˆçš„æ—¶å€™ï¼Œä½¿ç”¨Proxyæ¨¡å¼ï¼Œä¸‹é¢æ˜¯ä¸€äº›å¯ä»¥ä½¿ç”¨Proxyæ¨¡å¼å¸¸ç”¨æƒ…å†µï¼š
1. è¿œç¨‹ä»£ç†(Remote Proxy)ä¸ºä¸€ä¸ªå¯¹è±¡åœ¨ä¸åŒçš„åœ°å€ç©ºé—´æä¾›å±€éƒ¨ä»£ç†ã€‚
2. è™šä»£ç†(Virtual Proxy)æ ¹æ®éœ€è¦åˆ›å»ºå¼€é”€å¾ˆå¤§çš„å¯¹è±¡
3. ä¿æŠ¤ä»£ç†ï¼ˆProtection Proxyï¼‰æ§åˆ¶å¯¹åŸå§‹å¯¹è±¡çš„è®¿é—®ã€‚ä¿æŠ¤ä»£ç†ç”¨äºå¯¹è±¡åº”è¯¥æœ‰ä¸åŒçš„è®¿é—®æƒé™çš„æ—¶å€™ã€‚
4. æ™ºèƒ½æŒ‡å¼•ï¼ˆSmart Referenceï¼‰å–ä»£äº†ç®€å•çš„æŒ‡é’ˆï¼Œå®ƒåœ¨è®¿é—®å¯¹è±¡æ—¶åªéœ€ä¸€äº›é™„åŠ æ“ä½œï¼Œå…¸å‹ç”¨é€”ï¼š
1.å¯¹æŒ‡å‘å®é™…å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ï¼Œè¿™æ ·å½“è¯¥å¯¹è±¡æ²¡æœ‰å¼•ç”¨æ—¶ï¼Œå¯ä»¥è‡ªåŠ¨é‡Šæ”¾å®ƒ
2.å½“ç¬¬ä¸€æ¬¡å¼•ç”¨ä¸€ä¸ªæŒä¹…å¯¹è±¡æ—¶ï¼Œå°†å®ƒè£…å…¥å†…å­˜ã€‚
3.åœ¨è®¿é—®ä¸€ä¸ªå®é™…å¯¹è±¡å‰ï¼Œæ£€æŸ¥æ˜¯å¦å·²ç»é”å®šäº†å®ƒï¼Œä»¥ç¡®ä¿å…¶ä»–å¯¹è±¡ä¸èƒ½æ”¹å˜å®ƒã€‚

```java
public interface WizardTowser {
    void enter(Wizard wizard);
}

public class IvoryTowser implements WizardTowser {
    public void enter(Wizard wizard) {
        log.i("çœ‹ä¸è§");
    }
}
```

```java
public class Wizard {
    private final String name;
    public Wizard(String name) {
        this.name = name;
    }

    @Override
    public String toString() {
        return name;
    }
}
```
```java
public class WizardTowerProxy implements WizardTower {
    private static final int NUM_WIZARDS_ALLOWED = 3;

    private int numWizards;

    private final WizardTower tower;

    public WizardTowerProxy(WizardTower tower) {
        this.tower = tower;
    }

    public void enter(Wizard wizard) {
        if (numWizards < NUM_WIZARDS_ALLOWED) {
            tower.enter(wizard);
            numWizards++;
        } else {
            Log.i("allowed to enter");
        }
    }
}
```

#### Real world examples

* [java.lang.reflect.Proxy](http://docs.oracle.com/javase/8/docs/api/java/lang/reflect/Proxy.html)
* [Apache Commons Proxy](https://commons.apache.org/proper/commons-proxy/)
* Mocking frameworks Mockito, Powermock, EasyMock

## è¡Œä¸ºå‹æ¨¡å¼(åä¸€ç§)
### åç§°ï¼šChain of Responsibility(è´£ä»»é“¾æ¨¡å¼)
* æ„å›¾ï¼šä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥å—è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚å°†è¿™äº›å¯¹è±¡è¿æˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯¥è¯·æ±‚ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚
* é€‚ç”¨æ€§ï¼šâ‘ æœ‰å¤šä¸ªçš„å¯¹è±¡å¯ä»¥å¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼Œå“ªä¸ªå¯¹è±¡å¤„ç†è¯¥è¯·æ±‚è¿è¡Œæ—¶åˆ»è‡ªåŠ¨ç¡®å®šã€‚
â‘¡ä½ æƒ³åœ¨ä¸æ˜ç¡®æŒ‡å®šæ¥æ”¶è€…çš„æƒ…å†µä¸‹ï¼Œå‘å¤šä¸ªå¯¹è±¡ä¸­çš„ä¸€ä¸ªæäº¤ä¸€ä¸ªè¯·æ±‚ã€‚
â‘¢å¯å¤„ç†ä¸€ä¸ªè¯·æ±‚çš„å¯¹è±¡é›†åˆåº”è¢«åŠ¨æ€æŒ‡å®šã€‚

### åç§°ï¼šCommand(å‘½ä»¤æ¨¡å¼)

* æ„å›¾ï¼šå°†ä¸€ä¸ªè¯·æ±‚å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œä½¿ä½ å¯ç”¨ä¸åŒçš„è¯·æ±‚å¯¹å®¢æˆ·è¿›è¡Œå‚æ•°åŒ–ï¼›å¯¹è¯·æ±‚æ’é˜Ÿæˆ–è®°å½•è¯·æ±‚æ—¥å¿—ï¼Œä»¥åŠæ”¯æŒå¯æ’¤é”€çš„æ“ä½œã€‚
* é€‚ç”¨æ€§ï¼šâ‘ æŠ½è±¡å‡ºå¾…æ‰§è¡Œçš„åŠ¨ä½œä»¥å‚æ•°åŒ–æŸå¯¹è±¡ï¼Œä½ å¯ç”¨è¿‡ç¨‹è¯­è¨€ä¸­çš„å›è°ƒå‡½æ•°è¡¨è¾¾è¿™ç§å‚æ•°åŒ–æœºåˆ¶ã€‚å›è°ƒå‡½æ•°æŒ‡å‡½æ•°åœ¨æŸå¤„æ³¨å†Œï¼Œè€Œå®ƒå°†åœ¨ç¨åæŸä¸ªéœ€è¦çš„æ—¶å€™è¢«è°ƒç”¨ã€‚commandæ¨¡å¼æ˜¯å›è°ƒæœºåˆ¶çš„ä¸€ä¸ªé¢å‘å¯¹è±¡çš„æ›¿ä»£å“ã€‚
â‘¡åœ¨ä¸åŒçš„æ—¶åˆ»æŒ‡å®šã€æ’åˆ—å’Œæ‰§è¡Œè¯·æ±‚ã€‚ä¸€ä¸ªCommandå¯¹è±¡å¯ä»¥æœ‰ä¸€ä¸ªåˆå§‹è¯·æ±‚æ— å…³çš„ç”Ÿå­˜æœŸã€‚å¦‚æœä¸€ä¸ªè¯·æ±‚çš„æ¥å—è€…å¯ç”¨ä¸€ç§ä¸åœ°å€ç©ºé—´æ— å…³çš„æ–¹å¼è¡¨è¾¾ï¼Œé‚£ä¹ˆå°±å°†è´Ÿè´£è¯¥è¯·æ±‚çš„å‘½ä»¤å¯¹è±¡ä¼ é€ç»™å¦ä¸€ä¸ªä¸åŒçš„è¿›ç¨‹å¹¶åœ¨é‚£å„¿å®ç°è¯¥è¯·æ±‚ã€‚
â‘¢æ”¯æŒå–æ¶ˆæ“ä½œã€‚commandçš„Excuteæ“ä½œå¯åœ¨å®æ–½æ“ä½œå‰å°†çŠ¶æ€å­˜å‚¨èµ·æ¥ï¼Œåœ¨å–æ¶ˆæ“ä½œæ—¶è¿™ä¸ªçŠ¶æ€ç”¨æ¥æ¶ˆé™¤è¯¥æ“ä½œçš„å½±å“ï¼Œæ‰§è¡Œçš„å‘½ä»¤å°†è¢«å­˜å‚¨åœ¨ä¸€ä¸ªå†å²åˆ—è¡¨ä¸­ã€‚å¯é€šè¿‡å‘åå’Œå‘å‰éå†è¿™ä¸€åˆ—è¡¨å¹¶åˆ†åˆ«è°ƒç”¨unExcuteå’ŒExcuteæ¥å®ç°é‡æ•°ä¸é™çš„â€œå–æ¶ˆâ€å’Œâ€œé‡åšâ€ã€‚
â‘£æ”¯æŒä¿®æ”¹æ—¥å¿—ï¼Œè¿™æ ·å½“ç³»ç»Ÿå´©æºƒæ—¶ï¼Œè¿™äº›ä¿®æ”¹å¯ä»¥è¢«é‡åšä¸€éã€‚åœ¨Commandæ¥å£ä¸­æ·»åŠ è£…è½½æ“ä½œå’Œå­˜å‚¨æ“ä½œï¼Œå¯ä»¥ç”¨æ¥ä¿æŒå˜åŠ¨çš„ä¸€ä¸ªä¸€è‡´çš„ä¿®æ”¹æ—¥å¿—ã€‚åœ¨å´©æºƒä¸­æ¢å¤çš„è¿‡ç¨‹åŒ…æ‹¬ä»ç£ç›˜ä¸­é‡æ–°è¯»å…¥è®°å½•ä¸‹æ¥çš„å‘½ä»¤å¹¶ç”¨excuteæ“ä½œé‡æ–°æ‰§è¡Œå®ƒä»¬ã€‚
â‘¤åœ¨æ„å»ºçš„åŸè¯­æ“ä½œä¸Šçš„é«˜å±‚æ“ä½œæ„é€ ä¸€ç»„å˜åŠ¨ã€‚commandæ¨¡å¼æä¾›äº†å¯¹äº‹åŠ¡è¿›è¡Œå»ºæ¨¡çš„æ–¹æ³•ã€‚commandæœ‰ä¸€ä¸ªå…¬å…±æ¥å£ï¼Œä½¿å¾—ä½ å¯ä»¥ç”¨åŒä¸€ç§æ–¹å¼è°ƒç”¨æ‰€æœ‰çš„äº‹åŠ¡ã€‚åŒæ—¶ä½¿ç”¨è¯¥æ¨¡å¼ä¹Ÿæ˜“äºæ·»åŠ æ–°äº‹åŠ¡ä»¥æ‰©å±•ç³»ç»Ÿã€‚

### åç§°ï¼šInterpreter(è§£é‡Šå™¨æ¨¡å¼)
* æ„å›¾ï¼šç»™å®šä¸€ä¸ªè¯­è¨€ï¼Œå®šä¹‰å®ƒçš„æ–‡æ³•çš„ä¸€ç§è¡¨ç¤ºï¼Œå¹¶å®šä¹‰ä¸€ä¸ªè§£é‡Šå™¨ï¼Œè¿™ä¸ªè§£é‡Šå™¨ä½¿ç”¨è¯¥è¡¨ç¤ºæ¥è§£é‡Šè¯­è¨€ä¸­çš„å¥å­ã€‚
* é€‚ç”¨æ€§ï¼šå½“æœ‰ä¸€ä¸ªè¯­è¨€éœ€è¦è§£é‡Šæ‰§è¡Œï¼Œå¹¶ä¸”ä½ å¯å°†è¯¥è¯­è¨€ä¸­çš„å¥å­è¡¨ç¤ºä¸€ä¸ªæŠ½è±¡è¯­æ³•æ ‘æ—¶ï¼Œå¯ä½¿ç”¨è§£é‡Šå™¨æ¨¡å¼ã€‚è€Œå½“å­˜åœ¨ä»¥ä¸‹æƒ…å†µæ—¶è¯¥æ¨¡å¼æ•ˆæœæœ€å¥½ã€‚
è¯¥æ–‡æ³•ç®€å•å¯¹äºå¤æ‚çš„æ–‡æ³•ï¼Œæ–‡æ³•çš„ç±»å±‚æ¬¡å˜å¾—åºå¤§è€Œæ— æ³•ç®¡ç†ã€‚æ­¤æ—¶è¯­æ³•åˆ†æç¨‹åºç”Ÿæˆå™¨è¿™æ ·çš„å·¥å…·æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚å®ƒä»¬æ— éœ€æ„å»ºè¯­è¨€æ ‘å³å¯è§£é‡Šè¡¨è¾¾å¼ï¼Œè¿™æ ·å¯ä»¥èŠ‚çœç©ºé—´è€Œä¸”å¯èƒ½èŠ‚çœæ—¶é—´ã€‚
æ•ˆç‡ä¸æ˜¯ä¸€ä¸ªå…³é”®é—®é¢˜æœ€é«˜æ•ˆçš„è§£é‡Šå™¨é€šå¸¸ä¸æ˜¯é€šè¿‡ç›´æ¥è§£é‡Šè¯­æ³•åˆ†ææ ‘å®ç°çš„ï¼Œè€Œæ˜¯é¦–å…ˆå°†å®ƒä»¬è½¬æ¢æˆå¦ä¸€ç§å½¢å¼ã€‚

### åç§°ï¼šIterator(è¿­ä»£å­æ¨¡å¼)
* æ„å›¾ æä¾›ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­å„ä¸ªå…ƒç´ ï¼Œè€Œåˆä¸éœ€è¦æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨è¡¨ç¤ºã€‚
* é€‚ç”¨æ€§ è®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡çš„å†…å®¹è€Œæ— éœ€æš´éœ²å®ƒçš„å†…éƒ¨è¡¨ç¤º
æ”¯æŒå¯¹èšåˆå¯¹è±¡çš„å¤šç§éå†ã€‚
ä¸ºéå†ä¸åŒçš„èšåˆç»“æ„æä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£(å³æ”¯æŒå¤šæ€è¿­ä»£)

### åç§° Mediator(ä¸­ä»‹è€…æ¨¡å¼)
* æ„å›¾: ç”¨ä¸€ä¸ªä¸­ä»‹å¯¹è±¡æ¥å°è£…ä¸€ç³»åˆ—çš„å¯¹è±¡äº¤äº’ã€‚ä¸­ä»‹è€…ä½¿å„å¯¹è±¡ä¸éœ€è¦æ˜¾ç¤ºåœ°ç›¸äº’å¼•ç”¨ï¼Œä»è€Œä½¿è€¦åˆæ¾æ•£ï¼Œè€Œä¸”å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜å®ƒä»¬ä¹‹é—´çš„äº¤äº’ã€‚
* é€‚ç”¨æ€§ï¼šâ‘ ä¸€ç»„å¯¹è±¡ä»¥å®šä¹‰è‰¯å¥½ä½†æ˜¯å¤æ‚çš„æ–¹å¼è¿›è¡Œé€šä¿¡ã€‚äº§ç”Ÿçš„ç›¸äº’ä¾èµ–å…³ç³»ç»“æ„æ··ä¹±ä¸”éš¾ä»¥ç†è§£ã€‚
â‘¡ä¸€ä¸ªå¯¹è±¡å¼•ç”¨å…¶ä»–å¾ˆå¤šå¯¹è±¡å¹¶ä¸”ç›´æ¥ä¸è¿™äº›å¯¹è±¡é€šä¿¡ï¼Œå¯¼è‡´éš¾ä»¥å¤ç”¨è¯¥å¯¹è±¡ã€‚
â‘¢æƒ³å®šåˆ¶ä¸€ä¸ªåˆ†å¸ƒåœ¨å¯¹ä¸ªç±»ä¸­çš„è¡Œä¸ºï¼Œè€Œåˆä¸æƒ³ç”Ÿæˆå¤ªå¤šçš„å­ç±»ã€‚

### åç§° Memento(å¤‡å¿˜å½•æ¨¡å¼)
* æ„å›¾ åœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹ï¼Œæ•è·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶åœ¨è¯¥å¯¹è±¡ä¹‹å¤–ä¿å­˜è¿™ä¸ªçŠ¶æ€ï¼Œè¿™æ ·ä»¥åå°±å¯å°†è¯¥å¯¹è±¡æ¢å¤åˆ°åŸå…ˆä¿å­˜çš„çŠ¶æ€ã€‚
* é€‚ç”¨æ€§ å¿…é¡»ä¿å­˜ä¸€ä¸ªå¯¹è±¡åœ¨æŸä¸€ä¸ªæ—¶åˆ»çŠ¶æ€ï¼Œè¿™æ ·ä»¥åéœ€è¦æ—¶å®ƒæ‰èƒ½æ¢å¤åˆ°å…ˆå‰çš„çŠ¶æ€ã€‚
å¦‚æœä¸€ä¸ªç”¨æ¥å£æ¥è®©å…¶å®ƒå¯¹è±¡ç›´æ¥å¾—åˆ°è¿™äº›çŠ¶æ€ï¼Œå°†ä¼šæš´éœ²å¯¹è±¡çš„å®ç°ç»†èŠ‚å¹¶ç ´åå¯¹è±¡çš„å°è£…æ€§ã€‚

### åç§° Observer(è§‚å¯Ÿè€…æ¨¡å¼)
#### æ¨¡å¼åŠ¨æœº
 å®šä¹‰å¯¹è±¡é—´çš„ä¸€å®—ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚å‘ç”Ÿæ”¹å˜çš„å¯¹è±¡ç§°ä¸ºè§‚å¯Ÿç›®æ ‡ï¼Œè€Œè¢«é€šçŸ¥çš„å¯¹è±¡ç§°ä¸ºè§‚å¯Ÿè€…ï¼Œä¸€ä¸ªè§‚å¯Ÿç›®æ ‡å¯ä»¥å¯¹åº”å¤šä¸ªè§‚å¯Ÿè€…ï¼Œè€Œä¸”è¿™äº›è§‚å¯Ÿè€…ä¹‹é—´æ²¡æœ‰ç›¸äº’è”ç³»ï¼Œå¯ä»¥æ ¹æ®éœ€è¦å¢åŠ å’Œåˆ é™¤è§‚å¯Ÿè€…ã€‚
#### æ¨¡å¼å®šä¹‰
è§‚å¯Ÿè€…æ¨¡å¼(Observer Pattern):è§‚å¯Ÿè€…æ¨¡å¼åˆå«åš(Publish/Subscribe)æ¨¡å¼ã€æ¨¡å‹-è§†å›¾(Model/View)æ¨¡å¼ã€æº-ç›‘å¬å™¨(Source/Listener)æ¨¡å¼
Observed(è¢«è§‚å¯Ÿè€…):
```java
public class Weather {
    private WeatherType currentWeather;
    private List<WeatherObserver> observers;

    public Weather() {
        observers = new ArrayList<>();
        currentWeather = WeatherType.SUNNY;
    }

    public void addObserver(WeatherObserver obs) {
        observers.add(obs);
    }

    public void removeObserver(WeatherObserver obs) {
        observers.remove(obs);
    }

    public void timePasses() {
        WeatherType[] enumValues = WeatherType.values();
        currentWeather = enumValues[(currentWeather.ordinal() + 1) % enumValues.length];
        notifyObservers();
    }

    private void notifyObservers() {
        for (WeatherObserver obs : observers) {
            obs.update(currentWeather);
        }
    }
}
```

Observer:
```java
public interface WeatherObserver {
    void update(WeatherType currentWeather);
}
```

#### ä¼˜ç‚¹
è§‚å¯Ÿè€…æ¨¡å¼çš„ä¼˜ç‚¹
- è§‚å¯Ÿè€…æ¨¡å¼å¯ä»¥å®ç°è¡¨ç¤ºå±‚å’Œæ•°æ®é€»è¾‘å±‚çš„åˆ†ç¦»ï¼Œå¹¶å®šä¹‰äº†ç¨³å®šçš„æ¶ˆæ¯æ›´æ–°ä¼ é€’æœºåˆ¶ï¼ŒæŠ½è±¡äº†æ›´æ–°æ¥å£ï¼Œä½¿å¾—å¯ä»¥æœ‰å„ç§å„æ ·ä¸åŒçš„è¡¨ç¤ºå±‚ä½œä¸ºå…·ä½“è§‚å¯Ÿè€…è§’è‰²ã€‚
- è§‚å¯Ÿè€…æ¨¡å¼åœ¨è§‚å¯Ÿç›®æ ‡å’Œè§‚å¯Ÿè€…ä¹‹é—´å»ºç«‹äº†ä¸€ä¸ªæŠ½è±¡çš„è€¦åˆã€‚
- è§‚å¯Ÿè€…æ¨¡å¼æ”¯æŒå¹¿æ’­é€šä¿¡ã€‚
- è§‚å¯Ÿè€…æ¨¡å¼ç¬¦åˆ"å¼€é—­åŸåˆ™"çš„è¦æ±‚

#### ç¼ºç‚¹
- å¦‚æœä¸€ä¸ªè§‚å¯Ÿç›®æ ‡å¯¹è±¡æœ‰å¾ˆå¤šç›´æ¥å’Œé—´æ¥çš„è§‚å¯Ÿè€…çš„è¯ï¼Œå°†æ‰€æœ‰çš„è§‚å¯Ÿè€…éƒ½é€šçŸ¥ä¼šèŠ±è´¹å¾ˆå¤šæ—¶é—´
- å¦‚æœè§‚å¯Ÿè€…å’Œè§‚å¯Ÿç›®æ ‡ä¹‹é—´æœ‰å¾ªç¯ä¾èµ–çš„è¯ï¼Œè§‚å¯Ÿç›®æ ‡ä¼šè§¦å‘å®ƒä»¬ä¹‹é—´è¿›è¡Œå¾ªç¯è°ƒç”¨ï¼Œå¯èƒ½å¯¼è‡´ç³»ç»Ÿå´©æºƒ
- è§‚å¯Ÿè€…æ¨¡å¼æ²¡æœ‰ç›¸åº”çš„æœºåˆ¶è®©è§‚å¯Ÿè€…çŸ¥é“æ‰€è§‚å¯Ÿçš„ç›®æ ‡å¯¹è±¡æ˜¯æ€ä¹ˆå‘ç”Ÿå˜åŒ–çš„ï¼Œè€Œä»…ä»…åªæ˜¯çŸ¥é“è§‚å¯Ÿç›®æ ‡å‘ç”Ÿäº†å˜åŒ–

* é€‚ç”¨æ€§ 
    1. å½“ä¸€ä¸ªæŠ½è±¡æ¨¡å‹æœ‰ä¸¤ä¸ªæ–¹é¢ï¼Œå…¶ä¸­ä¸€ä¸ªæ–¹é¢ä¾èµ–äºå¦ä¸€ä¸ªæ–¹é¢ã€‚å°†ä¸¤è€…å°è£…åœ¨ç‹¬ç«‹çš„å¯¹è±¡ä¸­ä»¥ä½¿å®ƒä»¬å¯ä»¥å„è‡ªç‹¬ç«‹åœ°æ”¹å˜å’Œå¤ç”¨
    2. å½“å¯¹ä¸€ä¸ªå¯¹è±¡çš„æ”¹å˜éœ€è¦åŒæ—¶æ”¹å˜å…¶å®ƒå¯¹è±¡ï¼Œè€Œä¸çŸ¥é“å…·ä½“æœ‰å¤šå°‘å¯¹è±¡æœ‰å¾…æ”¹å˜ã€‚
    3. å½“ä¸€ä¸ªå¯¹è±¡å¿…é¡»é€šçŸ¥å…¶å®ƒå¯¹è±¡ï¼Œè€Œå®ƒåˆä¸èƒ½å‡å®šå…¶å®ƒå¯¹è±¡æ˜¯è°ã€‚æ¢è¨€ä¹‹ï¼Œä½ ä¸å¸Œæœ›è¿™äº›å¯¹è±¡æ˜¯ç´§å¯†è€¦åˆçš„ã€‚

### åç§° State(çŠ¶æ€æ¨¡å¼)
* æ„å›¾ å…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜
* é€‚ç”¨æ€§ ä¸€ä¸ªå¯¹è±¡çš„è¡Œä¸ºå–å†³äºå®ƒçš„çŠ¶æ€ï¼Œå¹¶ä¸”å®ƒå¿…é¡»åœ¨è¿è¡Œæ—¶åˆ»æ ¹æ®çŠ¶æ€æ”¹å˜å®ƒçš„è¡Œä¸ºã€‚
ä¸€ä¸ªæ“ä½œä¸­å«æœ‰åºå¤§çš„å¤šåˆ†æ”¯çš„æ¡ä»¶è¯­å¥ï¼Œä¸”è¿™äº›åˆ†æ”¯ä¾èµ–äºè¯¥å¯¹è±¡çš„çŠ¶æ€ã€‚è¿™çŠ¶æ€é€šå¸¸ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªæšä¸¾å¸¸é‡è¡¨ç¤ºã€‚é€šå¸¸ï¼Œæœ‰å¤šä¸ªæ“ä½œåŒ…å«è¿™ä¸€ç›¸åŒçš„æ¡ä»¶ç»“æ„ã€‚
Stateæ¨¡å¼å°†æ¯ä¸€ä¸ªæ¡ä»¶åˆ†æ”¯æ”¾å…¥ä¸€ä¸ªç‹¬ç«‹çš„ç±»ä¸­ã€‚è¿™ä½¿å¾—ä½ å¯ä»¥æ ¹æ®å¯¹è±¡è‡ªèº«çš„æƒ…å†µå°†å¯¹è±¡çš„çŠ¶æ€ä½œä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸€å¯¹è±¡å¯ä»¥ä¸ä¾èµ–äºå…¶ä»–å¯¹è±¡ç‹¬ç«‹å˜åŒ–ã€‚

### åç§° Strategy(ç­–ç•¥æ¨¡å¼)
* æ„å›¾ å®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•ï¼ŒæŠŠå®ƒä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œå¹¶ä¸”ä½¿å®ƒä»¬å¯ç›¸äº’æ›¿æ¢ã€‚æœ¬æ¨¡å¼ä½¿å¾—ç®—æ³•å¯ç‹¬ç«‹äºä½¿ç”¨å®ƒçš„å®¢æˆ·è€Œå˜åŒ–ã€‚
* é€‚ç”¨æ€§ è®¸å¤šç›¸å…³çš„ç±»ä»…ä»…æ˜¯è¡Œä¸ºæœ‰å¼‚ã€‚â€œç­–ç•¥â€æä¾›äº†ä¸€ç§ç”¨å¤šä¸ªè¡Œä¸ºä¸­çš„ä¸€ä¸ªè¡Œä¸ºæ¥é…ç½®ä¸€ä¸ªç±»çš„æ–¹æ³•ã€‚éœ€è¦ä½¿ç”¨ä¸€ä¸ªç®—æ³•çš„ä¸åŒå˜ä½“ã€‚
ç®—æ³•ä½¿ç”¨å®¢æˆ·ä¸åº”è¯¥çŸ¥é“çš„æ•°æ®ã€‚å¯ä½¿ç”¨ç­–ç•¥æ¨¡å¼ä»¥é¿å…æš´éœ²å¤æ‚çš„ã€ä¸ç®—æ³•ç›¸å…³çš„æ•°æ®ç»“æ„ã€‚
ä¸€ä¸ªç±»å®šä¹‰äº†å¤šç§è¡Œä¸ºï¼Œå¹¶ä¸”è¿™äº›è¡Œä¸ºåœ¨è¿™ä¸ªç±»çš„æ“ä½œä¸­ä»¥å¤šä¸ªæ¡ä»¶è¯­å¥çš„å½¢å¼å‡ºç°ã€‚å°†ç›¸å…³æ¡ä»¶åˆ†æ”¯ä¸€å¦‚å®ƒä»¬å„è‡ªçš„Strategyç±»ä¸­ä»¥æ›¿ä»£è¿™äº›æ¡ä»¶è¯­å¥ã€‚

### åç§° Template Method(æ¨¡æ¿æ–¹æ³•æ¨¡å¼)
* æ„å›¾ å®šä¹‰ä¸€ä¸ªæ“ä½œä¸­çš„ç®—æ³•çš„éª¨æ¶ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­ï¼ŒTemplate Methodä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜ä¸€ä¸ªç®—æ³•çš„ç»“æ„å³å¯é‡å®šä¹‰è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ã€‚

* é€‚ç”¨æ€§ ä¸€æ¬¡æ€§å®ç°ä¸€ä¸ªç®—æ³•çš„ä¸ä¾¿éƒ¨åˆ†ï¼Œè€Œå°†å¯å˜çš„è¡Œä¸ºç•™ç»™å­ç±»æ¥å®ç°.å„å­ç±»ä¸­çš„å…¬å…±çš„è¡Œä¸ºåº”è¢«æå–å‡ºæ¥å¹¶é›†ä¸­åˆ°ä¸€ä¸ªå…¬å…±çˆ¶ç±»ä¸­ä»¥é¿å…ä»£ç é‡å¤ã€‚



### åç§° Visitor(è®¿é—®è€…æ¨¡å¼)

* æ„å›¾ è¡¨ç¤ºä¸€ä¸ªä½œç”¨äºæŸå¯¹è±¡ç»“æ„ä¸­çš„å„å…ƒç´ çš„æ“ä½œã€‚å®ƒä½¿ä½ å¯ä»¥åœ¨ä¸æ”¹å˜å„å…ƒç´ çš„å‰æä¸‹å®šä¹‰ä½œç”¨äºè¿™äº›å…ƒç´ çš„æ–°æ“ä½œã€‚

* é€‚ç”¨æ€§ ä¸€ä¸ªå¯¹è±¡ç»“æ„åŒ…å«å¾ˆå¤šç±»å¯¹è±¡ï¼Œå®ƒä»¬ç”±ä¸åŒçš„æ¥å£ï¼Œè€Œä½ æƒ³å¯¹è¿™äº›å¯¹è±¡å®æ–½ä¸€äº›ä¾èµ–äºæŸå…·ä½“ç±»çš„æ“ä½œã€‚

éœ€è¦å¯¹ä¸€ä¸ªå¯¹è±¡ç»“æ„ä¸­çš„å¯¹è±¡è¿›è¡Œå¾ˆå¤šä¸åŒçš„å¹¶ä¸”ä¸æƒ³å…³çš„æ“ä½œï¼Œè€Œä½ æƒ³é¿å…è®©è¿™äº›æ“ä½œâ€œæ±¡æŸ“â€è¿™äº›å¯¹è±¡çš„ç±»ã€‚

Visitorä½¿å¾—ä½ å¯ä»¥å°†ç›¸å…³çš„æ“ä½œé›†ä¸­èµ·æ¥å®šä¹‰åœ¨ä¸€ä¸ªç±»ä¸­ã€‚å½“è¯¥å¯¹è±¡ç»“æ„è¢«å¾ˆå¤šåº”ç”¨å…±äº«æ—¶ï¼Œç”¨Visitoræ¨¡å¼è®©æ¯ä¸ªåº”ç”¨ä»…åŒ…å«éœ€è¦ç”¨åˆ°çš„æ“ä½œã€‚

å®šä¹‰çš„å¯¹è±¡ç»“æ„çš„ç±»å¾ˆå°‘æ”¹å˜ï¼Œä½†ç»å¸¸éœ€è¦åœ¨æ­¤ç»“æ„ä¸Šå®šä¹‰æ–°çš„æ“ä½œã€‚æ”¹å˜å¯¹è±¡ç»“æ„ç±»éœ€è¦é‡å®šä¹‰å¯¹æ‰€æœ‰è®¿é—®è€…çš„æ¥å£ï¼Œè¿™å¯èƒ½éœ€è¦å¾ˆå¤§çš„ä»£ä»·ã€‚å¦‚æœå¯¹è±¡ç»“æ„ç±»ç»å¸¸æ”¹å˜ï¼Œé‚£ä¹ˆå¯èƒ½è¿˜æ˜¯åœ¨è¿™äº›ç±»ä¸­å®šä¹‰è¿™äº›æ“ä½œè¾ƒå¥½ã€‚































